# 浏览器原理

## parse

### mealy状态机

* 运用FSM来实现HTML分析
* 每个状态都是一个函数，十分方便在各个状态下操作相关的事情

### html解析生成dom树

parser接受HTML文本作为参数返回一颗dom树

* HTML标准Tokenization完整的定义HTML状态
* EOF: End Of Fileq
* 创建标签（开始标签，结束标签，自封闭标签）
* 创建元素，在各个状态中处理其逻辑创建元素，标签结束状态提交token
* 处理属性，属性值分单、双、无引号写法，状态较多，处理属性结束时将属性加到标签token上
* 通过使用栈，从标签构建dom树，遇到开始标签时创建元素并入栈，遇到结束标签时出栈
* 自封闭节点可视为入栈后立刻出栈
* 任何元素的父元素是它入栈前的栈顶
* 文本节点，与自封闭标签处理类似，多个文本节点需要合并

## css computing

* css库解析css成AST
